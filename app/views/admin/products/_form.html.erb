<%= form_with(model: product, url: url) do |form| %>
  <% if product.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(product.errors.count, "error") %> prohibited this product from being saved:</h2>
      <ul>
        <% product.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="field">
    <%= form.label :name %>
    <%= form.text_field :name %>
  </div>
  <div class="field">
    <%= form.label :description %>
    <%= form.text_area :description %>
  </div>
  <div class="field">
    <%= form.label :active %>
    <%= form.check_box :active %>
  </div>
  <div class="field">
    <%= form.label :available %>
    <%= form.check_box :available %>
  </div>
  <div class="field">
    <%= form.label :validated %>
    <%= form.check_box :validated %>
  </div>
  <% if action_name == "new" ||  action_name == "create" %>
    <div class="field">
      <%= form.label :vendor %>
      <%= form.select(:vendor_id, options_for_select(Vendor.all.collect{ |v| [v.name,v.id] }),{:include_blank => "Select Vendor"}) %>
    </div>
    <div class="field">
      <%= form.label :brand %>
      <%= form.select(:brand_id, options_for_select(Brand.all.collect{ |v| [v.name,v.id] }),{:include_blank => "Select Brand"}) %>
    </div>
    <div class="field">
      <%= form.label :subcategory %>
      <%= form.select(:subcategory_id, options_for_select(Subcategory.all.collect{ |v| [v.name,v.id] }),{:include_blank => "Select Subcategory"}) %>
    </div>
  <% end %>
  <% if action_name == "edit" %>
    <div class="field">
      <%= form.label :vendor %>
      <%= form.select(:vendor_id, options_for_select(Vendor.all.collect{ |v| [v.name,v.id] },[product.vendor.name,product.vendor.id ]),{:include_blank => "Select Vendor"},disabled: true) %>
    </div>
    <div class="field">
      <%= form.label :brand %>
      <%= form.select(:brand_id, options_for_select(Brand.all.collect{ |v| [v.name,v.id] },[product.brand.name,product.brand.id ]),{:include_blank => "Select Brand"}) %>
    </div>
    <div class="field">
      <%= form.label :subcategory %>
      <%= form.select(:subcategory_id, options_for_select(Subcategory.all.collect{ |v| [v.name,v.id] },[product.subcategory.name,product.subcategory.id ]),{:include_blank => "Select Subcategory"}) %>
    </div>
  <% end %>
  <h1>Options <%=product.product_options.count %></h1>
  <%= form.fields_for :product_options do |product_option_form| %>
    <div class="field">
      <%= product_option_form.label :product_options %>
      <%= product_option_form.select(:option_id, Option.all.collect{ |v| [v.name,v.id] },{:include_blank => "Select Option"}) %>
    </div>
    <% if product.product_variant_options.count == 0%>
      <div class="field">
        <%= product_option_form.label :destroy %>
        <%= product_option_form.check_box :_destroy %>
      </div>
    <% end %>
  <% end %>
  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>
